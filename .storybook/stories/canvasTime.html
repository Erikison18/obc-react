<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>
<body>
	<div>jhsadkjhasid2321312</div>
	<canvas id="myCanvas" width="1000" height="1000"></canvas>

<script>

	window.onload= function(){
		var c=document.getElementById("myCanvas"), 
			ctx=c.getContext("2d");
			ctx.scale(2,2);
			autoPlay(ctx);
		setInterval(function(){autoPlay(ctx)},1000);

		var o2oDemo=document.getElementById("o2oDemo"), 
			content=o2oDemo.getContext("2d");
			content.scale(4,4);

			o2oPlay(content);
			setInterval(function(){o2oPlay(content)},1000);
	}

	function countTime(){

		var currentTimeStamp= new Date().getTime();
		var endTimeStamp = new Date('2017-07-30 18:00:00').getTime();
		var residueStamp=(endTimeStamp-currentTimeStamp)/1000;
		var minute = parseInt(residueStamp/60);
        var secondv = parseInt(residueStamp)%60;
  		var rate = residueStamp/3600;

  		return {
  			distance:rate*2*Math.PI,
  			minute:minute,
  			secondv:secondv
  		}
	}

	// console.log(countTime());

	// function o2oPlay(content){
	// 	content.clearRect(0,0,1000,1000);
	// 	content.save();
	// 	content.strokeStyle="#43a1ec";
	// 	content.translate(100,100);
	// 	content.lineWidth=10;
	// 	content.arc(0,0,50,3.5*Math.PI-countTime().distance,1.5*Math.PI);
	// 	content.stroke();
	// 	content.beginPath();
	// 	content.restore();
	// 	content.fillText('45:00',100,100);
	// 	content.fillText('剩余时间',100,200);
	// }

	function autoPlay(ctx){
		var myDate = new Date(),
			Hours = myDate.getHours(),       //获取当前小时数(0-23)
			Minutes = myDate.getMinutes(),     //获取当前分钟数(0-59)
			Seconds = myDate.getSeconds();     //获取当前秒数(0-59)
			ctx.clearRect(0,0,1000,1000);
		ctx.save();
		ctx.strokeStyle="#FF0";
		ctx.fillStyle="#FF0";
		ctx.translate(100,100);
		ctx.arc(0,0,4,0,2*Math.PI);
		ctx.fill();
		ctx.beginPath();

		//圆
		ctx.lineWidth=10;
		ctx.arc(0,0,50,0,2*Math.PI);
		ctx.stroke();
		ctx.beginPath();
		
		//时间刻度
		ctx.save();
		ctx.font="5px Arial";
		for(k=1;k<13;k++){
			xWidth = ctx.measureText(k).width/2;
			ctx.rotate(30*Math.PI/180);
			ctx.fillText(k,-xWidth,-30);
		}
		ctx.beginPath();
		ctx.restore();
		
		//分刻度
		ctx.save();
		ctx.lineWidth=5;
		for(j=0;j<12;j++){
			ctx.moveTo(0,-54);
			ctx.lineTo(0,-58);
			ctx.rotate(Math.PI/6);
		}
		ctx.stroke();
		ctx.beginPath();
		ctx.restore();
		ctx.save();
		for(i=0;i<60;i++){
			if(i%5!=0){
				ctx.lineWidth=1;
				ctx.moveTo(0,-42);
				ctx.lineTo(0,-45);
				ctx.stroke();
				ctx.beginPath();
			}else{
				ctx.lineWidth=2;
				ctx.moveTo(0,-41);
				ctx.lineTo(0,-45);
				ctx.stroke();
			}
			ctx.rotate(6*Math.PI/180);
		}
		
		ctx.beginPath();
		ctx.restore();
		
		//秒针
      	ctx.save();
		ctx.rotate(Seconds*Math.PI/30);
		ctx.lineWidth=2;
		ctx.moveTo(0,15);
		ctx.lineTo(0,-40);
		ctx.stroke();
		ctx.beginPath();
		ctx.restore();
		
		//分针
      	ctx.save();
		ctx.rotate((Minutes+Seconds/60)*Math.PI/30);
		// console.log(Minutes+Seconds/60)
		ctx.lineWidth=3;
		ctx.moveTo(0,10);
		ctx.lineTo(0,-30);
		ctx.stroke();
		ctx.beginPath();
		ctx.restore();
		
		//时针
      	ctx.save();
		ctx.rotate((Hours+Minutes/60)*Math.PI/30);
		// console.log(Hours+Minutes/60)
		ctx.lineWidth=5;
		ctx.moveTo(0,5);
		ctx.lineTo(0,-20);
		ctx.stroke();
		ctx.beginPath();
		ctx.restore();
		
		ctx.restore();
	}
	
</script>
<script type="text/javascript">
	setTimeout(function(){
	html2canvas(document.querySelector("body"), {
            onrendered: function(canvas) {
                //document.body.appendChild(canvas);
                var url = canvas.toDataURL("image/png");
　　　　　　　 let img = document.createElement('img');

        img.src = url;
        document.body.appendChild(img);

            }
        });
	},1000)
	// html2canvas(document.querySelector("body")).then(canvas => {
	//     console.log(canvas.getContext("experimental-webgl", {preserveDrawingBuffer: true}))
	// })

</script>
</body>

</html>

